<!DOCTYPE html>
<html>
<head>
  <link href="https://fonts.googleapis.com/css2?family=Bangers&display=swap" rel="stylesheet">

  <title>Pixel Canvas</title>
  <style>
body {
  background-color: #f7f7f7;
  display: grid;
  place-items: center;
  height: 100vh;
  margin: 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
}

.container {
  display: flex;
  flex-direction: column;
  align-items: center;
  padding: 20px;
  border-radius: 10px;
  background-color: white;
  box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
  max-width: 600px;
  width: 100%;
}

canvas {
  border: 1px solid #e0e0e0;
  margin-bottom: 20px;
  max-width: 100%;
  height: auto;
}

.title {
  text-align: center;
  font-size: 2.5em;
  font-family: 'Bangers', cursive;
  text-transform: uppercase;
  letter-spacing: 2px;
  color: #333;
  text-shadow: 3px 3px #999;
  margin-bottom: 10px;
}

.controls {
  display: flex;
  justify-content: center;
  align-items: center;
  margin-bottom: 10px;
}

input[type="color"] {
  border: none;
  padding: 5px;
  width: 100px;
  height: 30px;
  border-radius: 5px;
  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
}

.delete-button,
.screenshot-button,
.eraser-button {
  margin-left: 10px;
  padding: 10px 20px;
  background-color: #e0e0e0;
  color: #333;
  border: none;
  border-radius: 5px;
  font-size: 16px;
  cursor: pointer;
  box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
}

.delete-button:hover,
.screenshot-button:hover,
.eraser-button:hover {
  background-color: #d0d0d0;
}

/* Grid Layout Styles */

canvas {
  position: relative;
}

.grid-lines {
  position: absolute;
  pointer-events: none;
}

.grid-lines::after {
  content: '';
  position: absolute;
  background-color: #dddddd;
  opacity: 0.5;
}

.grid-lines.horizontal::after {
  top: -1px;
  left: 0;
  right: 0;
  height: 10px;
  background-image: repeating-linear-gradient(to right, transparent, transparent 1px, #dddddd 1px, #dddddd 2px);
}

.grid-lines.vertical::after {
  left: -1px;
  top: 0;
  bottom: 0;
  width: 10px;
  background-image: repeating-linear-gradient(to bottom, transparent, transparent 1px, #dddddd 1px, #dddddd 2px);
}

/* Media Queries for Responsive Layout */

@media (max-width: 600px) {
  .container {
    padding: 10px;
  }

  canvas {
    margin-bottom: 10px;
  }
}

  </style>
</head>
<body>
  <h1 class="title">Pixel Canvas</h1>
  <div class="container">
    <canvas id="canvas" width="1080" height="1080"></canvas>
    <div class="controls">
      <input type="color" id="color-picker">
      <button class="delete-button" onclick="deleteCanvas()">Delete Canvas</button>
      <button class="screenshot-button" onclick="captureScreenshot()">Take Screenshot</button>
      <button class="eraser-button" onclick="toggleEraser()">Eraser</button>
    </div>
  </div>

  <script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var colorPicker = document.getElementById('color-picker');
    var gridSize = 10;
    var eraserActive = false;

    function drawPixel(x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, gridSize, gridSize);
    }

    function erasePixel(x, y) {
      ctx.clearRect(x, y, gridSize, gridSize);
    }

    // Load pixel data from localStorage
    var pixelDataString = localStorage.getItem('pixelData');
    if (pixelDataString) {
      var pixelData = JSON.parse(pixelDataString);
      pixelData.forEach(pixel => {
        drawPixel(pixel.x, pixel.y, pixel.color);
      });
    } else {
      pixelData = [];
    }

    // Handle drawing for both click and touch events
    var handleDrawing = function(e) {
      e.preventDefault();

      var x, y;

      if (e.type === 'click') {
        x = e.clientX;
        y = e.clientY;
      } else if (e.type === 'touchstart') {
        x = e.touches[0].clientX;
        y = e.touches[0].clientY;
      }

      var rect = canvas.getBoundingClientRect();
      var scaleX = canvas.width / rect.width;
      var scaleY = canvas.height / rect.height;

      var canvasX = (x - rect.left) * scaleX;
      var canvasY = (y - rect.top) * scaleY;

      var gridX = Math.floor(canvasX / gridSize) * gridSize;
      var gridY = Math.floor(canvasY / gridSize) * gridSize;

      if (eraserActive) {
        erasePixel(gridX, gridY);

        // Remove erased pixel from pixelData array
        pixelData = pixelData.filter(pixel => pixel.x !== gridX || pixel.y !== gridY);
        localStorage.setItem('pixelData', JSON.stringify(pixelData));
      } else {
        // Draw pixel on canvas
        drawPixel(gridX, gridY, colorPicker.value);

        // Store pixel in array
        pixelData.push({
          x: gridX,
          y: gridY,
          color: colorPicker.value
        });

        // Save pixel data in localStorage
        localStorage.setItem('pixelData', JSON.stringify(pixelData));
      }
    };

    // Add event listeners for both click and touch events
    canvas.addEventListener('click', handleDrawing);
    canvas.addEventListener('touchstart', handleDrawing);

    // Function to delete the canvas and clear the pixel data
    function deleteCanvas() {
      ctx.clearRect(0, 0, canvas.width, canvas.height);
      pixelData = [];
      localStorage.removeItem('pixelData');
    }

    // Function to capture a screenshot of the canvas
    function captureScreenshot() {
      var tempCanvas = document.createElement('canvas');
      var tempCtx = tempCanvas.getContext('2d');
      tempCanvas.width = canvas.width;
      tempCanvas.height = canvas.height;
      tempCtx.fillStyle = '#ffffff';
      tempCtx.fillRect(0, 0, tempCanvas.width, tempCanvas.height);
      tempCtx.drawImage(canvas, 0, 0);

      var link = document.createElement('a');
      link.href = tempCanvas.toDataURL();
      link.download = 'screenshot.png';
      link.click();
    }

    // Function to toggle the eraser functionality
    function toggleEraser() {
      eraserActive = !eraserActive;

      // Update button text based on eraser state
      var eraserButton = document.querySelector('.eraser-button');
      eraserButton.textContent = eraserActive ? 'Stop Eraser' : 'Eraser';
    }
  </script>
</body>
</html>

