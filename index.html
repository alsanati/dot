<html>
<head>
  <title>Pixel Canvas</title>
  <style>
    body {
      background-color: #f7f7f7;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      margin: 0;
      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, Oxygen, Ubuntu, Cantarell, 'Open Sans', 'Helvetica Neue', sans-serif;
    }

    .container {
      display: flex;
      flex-direction: column;
      align-items: center;
      padding: 20px;
      border-radius: 10px;
      background-color: white;
      box-shadow: 0px 3px 6px rgba(0, 0, 0, 0.16);
      max-width: 600px;
      width: 100%;
    }

    #canvas {
      border: 1px solid #e0e0e0;
      margin-bottom: 20px;
      max-width: 100%;
      height: auto;
    }

    input[type="color"] {
      border: none;
      padding: 5px;
      width: 100px;
      height: 30px;
      border-radius: 5px;
      box-shadow: 0px 2px 6px rgba(0, 0, 0, 0.1);
    }

    /* Media Queries for Responsive Layout */

    @media (max-width: 600px) {
      .container {
        padding: 10px;
      }

      #canvas {
        margin-bottom: 10px;
      }
    }
  </style>
</head>
<body>
  <div class="container">
    <canvas id="canvas" width="1080" height="1080"></canvas>
    <input type="color" id="color-picker">
  </div>

  <script>
    var canvas = document.getElementById('canvas');
    var ctx = canvas.getContext('2d');
    var colorPicker = document.getElementById('color-picker');
    var gridSize = 10;

    function drawPixel(x, y, color) {
      ctx.fillStyle = color;
      ctx.fillRect(x, y, gridSize, gridSize);
    }

    // Load pixel data from localStorage
    var pixelDataString = localStorage.getItem('pixelData');
    if (pixelDataString) {
      var pixelData = JSON.parse(pixelDataString);
      pixelData.forEach(pixel => {
        drawPixel(pixel.x, pixel.y, pixel.color);
      });
    } else {
      pixelData = [];
    }

    // Handle drawing for both click and touch events
    var handleDrawing = function(e) {
      e.preventDefault();

      var x, y;

      if (e.type === 'click') {
        x = e.clientX;
        y = e.clientY;
      } else if (e.type === 'touchstart') {
        x = e.touches[0].clientX;
        y = e.touches[0].clientY;
      }

      var rect = canvas.getBoundingClientRect();
      var scaleX = canvas.width / rect.width;
      var scaleY = canvas.height / rect.height;

      var canvasX = (x - rect.left) * scaleX;
      var canvasY = (y - rect.top) * scaleY;

      var gridX = Math.floor(canvasX / gridSize) * gridSize;
      var gridY = Math.floor(canvasY / gridSize) * gridSize;

      // Draw pixel on canvas
      drawPixel(gridX, gridY, colorPicker.value);

      // Store pixel in array
      pixelData.push({
        x: gridX,
        y: gridY,
        color: colorPicker.value
      });

      // Save pixel data in localStorage
      localStorage.setItem('pixelData', JSON.stringify(pixelData));
    };

    // Add event listeners for both click and touch events
    canvas.addEventListener('click', handleDrawing);
    canvas.addEventListener('touchstart', handleDrawing);

  </script>
</body>
</html>
